{% extends 'base.html' %}
{% load static %}

{% block body %}
    <link rel="stylesheet" href="{% static 'css/top-bar.css' %}">
    <link rel="stylesheet" href="{% static 'css/side-menu.css' %}">
    <link rel="stylesheet" href="{% static 'css/friend-bar.css' %}">
    <link rel="stylesheet" href="{% static 'css/friend-block.css' %}">
    <link rel="stylesheet" href="{% static 'css/notifications.css' %}">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'js/navs.js' %}"></script>
    <script src="{% static 'js/suggest_users.js' %}"></script>
    <script defer src="{% static 'js/friends.js' %}"></script>
    <script defer src="{% static 'js/friend-block.js' %}"></script>
    <script defer src="{% static 'js/edit-profile.js' %}"></script>
    <script defer src="{% static 'js/notifications.js' %}"></script>
    
    <main id="MainPage" style="padding: 70px;">
        {% block main_content %}
        {% endblock %}
    </main>
    {% if user.is_authenticated %}
        {% block top-bar %}
        <div class="top-bar">
            <form method="GET" action="{% url 'search-users' %}">
                <div class="search-container">
                    <input type="text" placeholder="Search for players..." name="searched" id="search" onkeyup="getSuggestions()">
                    <button type="submit" id="searchButton">
                        <img id="search-icon" src="{% static 'assets/icons/binoculars.png' %}">
                    </button>
                    <div id="suggestions" ></div>    
                </div>
            </form>
            <div class="top-right">
                <button style="background: none; border: none;" onclick="getNotifications()" data-user-id="{{ user.id }}">
                    <img class="bell-icon" src="{% static 'assets/icons/Doorbell.png' %}">
                </button>
                
                <!-- Popup Modal -->
                <div id="notificationModal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeModal()">&times;</span>
                        <ul id="notificationList"></ul>
                    </div>
                </div>
            
                <div id="notifications" ></div>
                <a href="{% url 'user-profile' user.username %}">
                    <img class="profile-pic" src="{{ user.picture.url }}" alt="Profile">
                </a>
            </div>
            
        </div>
        {% endblock %}
        
        {% block side-menu %}
            <div class="left-div" id="left-div">
                <button class="select-item expandable-section" onclick="toggleLeftDiv()">
                    <img class="icon2" src="{% static 'assets/icons/logo2.png' %}" alt="Ping Pong">
                    <span class="icon-title2 bold">Pong Game</span>
                </button>
                <div class="selects">
                    <button class="select-item">
                        <a class="side-menu_a" href="{% url 'home' %}" data-url="{% url 'home' %}" data-page="home" data-icon="{% static 'assets/icons/pong.png' %}" data-highlight="{% static 'assets/icons/pong-highlight.png' %}" onclick="loadPage(event)">
                            <img class="icon" src="{% static 'assets/icons/pong.png' %}" alt="Ping Pong">
                            <span class="icon-title">Singles</span>
                        </a>
                    </button>
                    <button class="select-item">
                        <a class="side-menu_a" href="{% url 'tournaments' %}" data-url="{% url 'tournaments' %}" data-page="tournaments" data-icon="{% static 'assets/icons/tournament.png' %}" data-highlight="{% static 'assets/icons/tournament-highlight.png' %}" onclick="loadPage(event)">
                            <img class="icon" src="{% static 'assets/icons/tournament.png' %}" alt="Tournament">
                            <span class="icon-title">Tournaments</span>
                        </a>
                    </button>
                    <button class="select-item">
                        <a class="side-menu_a" href="{% url 'user-profile' user.username %}" data-url="{% url 'user-profile' user.username %}" data-page="profile" data-icon="{% static 'assets/icons/profile.png' %}" data-highlight="{% static 'assets/icons/profile-highlight.png' %}" onclick="loadPage(event)">
                            <img class="icon" src="{% static 'assets/icons/profile.png' %}" alt="User">
                            <span class="icon-title">User</span>
                        </a>
                    </button>
                    <button class="select-item logout-icon">
                        <a class="side-menu_a" href="{% url 'login' %}" data-url="{% url 'login' %}" data-page="login" data-icon="{% static 'assets/icons/logout.png' %}" data-highlight="{% static 'assets/icons/logout.png' %}" onclick="loadPage(event)">
                            <img class="icon" src="{% static 'assets/icons/logout.png' %}" alt="logout">
                            <span class="icon-title">Logout</span>
                        </a>
                    </button>
                </div>
            </div>
        {% endblock %}

        {% block friend-bar %}
            <button class="toggle-button" id="toggle-button" onclick="toggleSidebar('{{user_id}}')">
                <img src="{% static 'assets/icons/puxador.png' %}">
            </button>
            <div class="sidebar" id="sidebar"></div>
        {% endblock %}
    {% endif %}
        

{% endblock %}